<!doctype html>
<html>
<head>
  <link href='http://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="stylesheet" href="./css/styles.css" type="text/css">

  <!-- OLD CSS DEPENDENCIES THAT WILL BE REFACTORED OUT WITH THE COMPONENTS -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap-dropdown-checkbox.css">
  <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.0/css/bootstrap-toggle.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="css/bootstrap-slider.css">
  <link href="./css/select2.min.css" rel="stylesheet" />

<!--
  <meta name="viewport" content="width=device-width, initial-scale=0.65, maximum-scale=0.65">
-->
</head>
<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-12 col-md-12 col-lg-12">
        <div class="panel panel-primary">
          <div class="panel-heading text-center">
            <div class="container-fluid">
              <div class="row">
                <div class="col-sm-5 col-md-3 col-lg-3">
                  <!-- COFC BiRG LOGOS -->
                  <img alt="COFC" src="./dat/img/cofc_logo_icon.jpg">

                  <img alt="BiRG" src="./dat/img/Paul-labs.png">
                </div>
                <div class="col-sm-4 col-md-7 col-lg-7">
                  <h1>Translational Science Dashboard</h1>
                  <h5>Biomedical Informatics Center - Medical University of South Carolina</h5>
                  <h5>Bioinformatics Research Group - College of Charleston</h5>
                </div>
                <div class="col-sm-3 col-md-2 col-lg-2">
                  <!-- MUSC BMIC LOGOS -->
                  <img alt="MUSC" src="./dat/img/musc_logo.gif">

                  <img alt="BMIC" src="./dat/img/BMIC_icon.png">
                </div>
              </div>
            </div>
          </div>

          <div class="panel-body container-fluid">
            <div class="row">
              <div class="col-sm-12 col-md-8 col-lg-8">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                      <div class="panel panel-default">
                        <div class="panel-body vis" id="weber">
                          <!-- Weber Vis -->
                          <div class="chart"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                      <div class="panel panel-default">
                        <div class="panel-body vis" id="dhm">
                          <!-- DHM Vis -->
                          <div class="dynamic-hm"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- options here? -->
              <div class="col-sm-12 col-md-4 col-lg-4">
                <div class="container-fluid">
                  <div class="row">
                    <div class="col-sm-12 col-md-12 col-lg-12">
                      <div class="panel panel-info text-center">
                        <div class="panel-heading">
                          <h4><strong>Filters</strong></h4>
                        </div>
                        <div class="panel-body">

                          <div class="container-fluid">

                            <div class="row">
                              <!-- FILTER DROPDOWNS -->
                              <div class="col-md-12 col-lg-12">

                                <div class="container-fluid">

                                  <div class="row">
                                    <div class="col-md-12 col-lg-12">
                                      <h5>Mesh Term Filter</h5>
                                    </div>
                                  </div>

                                  <div class="row">
                                      <div class="col-md-12 col-lg-12">
                                        <select id="meshTermFilter" class="filter-select"></select>
                                      </div>
                                  </div>

                                </div>

                              </div>
                            </div>
                            <hr>
                            <div class="row">
                              <div class="col-md-12 col-lg-12">

                                <div class="container-fluid">

                                  <div class="row">
                                    <div class="col-md-12 col-lg-12">
                                      <!--<button id="tglNodeFilter" type="button" class="btn btn-default" data-toggle="button">
                                        Department Filter
                                      </button>-->
                                      <h5>Department Filter</h5>
                                    </div>
                                  </div>

                                  <div class="row">
                                    <div class="col-md-12 col-lg-12">
                                      <select id="nodeFilter" class="filter-select"></select>
                                    </div>
                                  </div>

                                </div>

                              </div>
                            </div>
                            <hr>
                            <div class="row">
                              <div class="col-md-6 col-lg-6">
                                <button id="btnApplyFilters" type="button" class="btn btn-info">Apply Filters</button>
                              </div>
                            </div>

                          </div> <!-- END FILTER CONTAINER -->

                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="container-fluid">
                      <div class="col-sm-12 col-md-12 col-lg-12">
                        <div class="panel panel-info text-center">
                          <div class="panel-heading">
                            <h4><strong>Node Options</strong></h4>
                          </div>
                          <div class="panel-body">

                            <div class="container-fluid">
                              <div class="row">
                                <div class="col-md-6 col-lg-6">
                                  <p>Node Color: </p>
                                  <div class="btn-group">
                                      <button id="btnNodeColor" type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-expand="false">
                                      Trans Science<span class="caret"></span>
                                      </button>
                                      <ul class="dropdown-menu" role="menu">
                                          <li><a href="#" id="nodeColorListOne">Degree</a></li>
                                          <li><a href="#" id="nodeColorListTwo">In Degree</a></li>
                                          <li><a href="#" id="nodeColorListThree">Out Degree</a></li>
                                          <li><a href="#" id="nodeColorListFour">Animal</a></li>
                                          <li><a href="#" id="nodeColorListFive">Human</a></li>
                                          <li><a href="#" id="nodeColorListSix">Cell</a></li>
                                          <li><a href="#" id="nodeColorListSeven">Publication Count</a></li>
                                      </ul>
                                  </div>
                                </div>
                                <div class="col-md-6 col-lg-6">
                                  <p>Node Size: </p>
                                  <div class="btn-group">
                                      <button id="btnNodeSize" type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-expand="false">
                                      Degree<span class="caret"></span>
                                      </button>
                                      <ul class="dropdown-menu" role="menu">
                                          <li><a href="#" id="nodeSizeListOne">In Degree</a></li>
                                          <li><a href="#" id="nodeSizeListTwo">Out Degree</a></li>
                <!--                            <li><a href="#" id="nodeSizeListThree">Centrality</a></li> -->
                                          <li><a href="#" id="nodeSizeListFour">Animal</a></li>
                                          <li><a href="#" id="nodeSizeListFive">Human</a></li>
                                          <li><a href="#" id="nodeSizeListSix">Cell</a></li>
                                          <li><a href="#" id="nodeSizeListSeven">Publication Count</a></li>
                                      </ul>
                                  </div>
                                </div>
                              </div>
                              <hr>
                              <div class="row">
                                <div class="col-md-12 col-lg-12">
                                  <p>Node Trails </p>
                                  <button id="tglTrails" type="button" class="btn btn-default" data-toggle="button">Off</button>
                                </div>
                              </div>


                            </div> <!-- END NODE OPTIONS CONTAINER -->

                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="container-fluid">
                      <div class="col-sm-12 col-md-12 col-lg-12">
                        <div class="panel panel-info text-center">
                          <div class="panel-heading">
                            <h4><strong>Edge Options</strong></h4>
                          </div>
                          <div class="panel-body">

                            <div class="container-fluid">
                              <div class="row">
                                <div class="col-md-12 col-lg-12">
                                  <p>Edge Color: </p>
                                  <div class="btn-group">
                                      <button id="btnEdgeColor" type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown" aria-expand="false">
                                      Connection Density<span class="caret"></span>
                                      </button>
                                      <ul class="dropdown-menu" role="menu">
                                          <li><a href="#" id="edgeColorListOne"># Publications (both)</a></li>
                                          <li><a href="#" id="edgeColorListTwo"># Publications (either)</a></li>
                                          <li><a href="#" id="edgeColorListThree">Human Research</a></li>
                                          <li><a href="#" id="edgeColorListFour">Cell Research</a></li>
                                          <li><a href="#" id="edgeColorListFive">Animal Research</a></li>
                                          <li><a href="#" id="edgeColorListFive">Animal & Cell Research</a></li>
                                      </ul>
                                  </div>
                                </div>
                              </div>
                              <hr>
                              <div class="row">
                                <div class="col-md-12 col-lg-12">
                                  <p>Show Edges </p>
                                  <button id="tglEdge" type="button" class="btn btn-default" data-toggle="button">Off</button>
                                </div>
                              </div>

                            </div> <!-- END EDGE OPTIONS CONTAINER -->

                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="row">
                    <div class="container-fluid">
                      <div class="col-sm-12 col-md-12 col-lg-12">
                        <div class="panel panel-info text-center">
                          <div class="panel-heading">
                            <h4><strong>Misc Options</strong></h4>
                          </div>
                          <div class="panel-body">

                            <div class="container-fluid">
                              <div class="row">
                                <div class="col-md-12 col-lg-12">
                                  <p>Year slider</p>
                                  <input id="date-slider" type="text" class="span2" value="" data-slider-min="2006" data-slider-max="2013" data-slider-step="1" data-slider-value="[2006,2013]"/>
                                </div>
                              </div>
                              <hr>
                              <div class="row">
                                <div class="col-md-12 col-lg-12">
                                  <p>Transition</p>
                                  <button id="tglTransition" type="button" class="btn btn-default" data-toggle="button">Off</button>
                                </div>
                              </div>
                              <hr>
                              <div class="row">
                                <div class="col-md-12 col-lg-12">
                                  <p>Cohort Selection</p>
                                  <input id="cohort-slider" type="text" class="span2" value="" data-slider-min="0" data-slider-max="6" data-slider-step="1" data-slider-value="[0,1]"/>
                                </div>
                              </div>
                            </div> <!-- END MISC OPTS CONTAINER -->

                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- INFO & TIME SEQUENCE -->
  <div class="container-fluid">
    <div class="row">
      <!-- INFO PANEL -->
      <div class="col-sm-6 col-md-6 col-lg-6">
        <div class="panel panel-success">
          <div class="panel-heading text-center">
            <h2>Project Information</h2>
          </div>
          <div class="panel-body article">
            <div class="container-fluid">
              <!-- WHO -->
              <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-12">
                  <div class="container-fluid">
                    <!-- MUSC AND BMIC LOGOS -->

                    <img alt="MUSC" src="./dat/img/musc_logo.gif">

                    <img alt="BMIC" src="./dat/img/BMIC_icon.png">

                    <img alt="COFC" src="./dat/img/cofc_logo_icon.jpg">

                    <img alt="BiRG" src="./dat/img/Paul-labs.png">
                  </div>
                </div>
              </div>
              <!-- THE METHOD -->
              <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-12">
                  <p>
                    The translational science dashboard has been an evolving project since January of 2015.  The project
                    has been developed under the direction of the Biomedical Informatics Center at the Medical University of South
                    Carolina, with the cooperation of the Bioinformatics Research Group at College of Charleston.
                  </p>
                  <h3 class="text-center"><b>The Method</b></h3>
                  <p>
                    From the start, this project seeked to leverage MUSC's participation in Open Linked Data.  All data utilized is available
                    via the MUSC SPARQL endpoint located <a target="_new" href="https://profiles.healthsciencessc.org/ProfilesSPARQLAPI/ProfilesSPARQLAPI.svc/Search">here</a>.
                    The endpoint can be accessed with SPARQL queries conforming to the <a target="_new" href="https://wiki.duraspace.org/display/VIVO/VIVO-ISF+Ontology">VIVO</a> ontology.
                    The following is an example query for gathering author and publication identification data for 2006:
                  </p>
                  <br>
                  <pre><code>
PREFIX  cat:  &#60;http:&#47;&#47;profiles.catalyst.harvard.edu&#47;ontology&#47;prns#&#62;
PREFIX  purl: &#60;http:&#47;&#47;purl.org&#47;ontology&#47;bibo&#47;&#62;
PREFIX  core: &#60;http:&#47;&#47;vivoweb.org&#47;ontology&#47;core#&#62;

SELECT ?year ?pmid ?author
WHERE
{
  ?auth cat:fullName ?author.
  ?auth core:authorInAuthorship ?publication.
  ?publication core:linkedInformationResource ?details.
  ?details purl:pmid ?pmid.
  ?details cat:publicationDate ?year.
FILTER ( ( ?year> "2006-01-01T00:00:00Z") &&( ?year< "2006-12-31T00:00:00Z") )
} ORDER BY ?year ?pmid
                  </code></pre>
                  <br>
                  <p>
                  The primary visualization utilizes a tertiary plot and a slight variation of <a href="./dat/pdf/Weber.pdf" target="_blank"><i>Weber's</i></a> method of mapping publications to
                  three general areas of research: <strong>H</strong>uman, <strong>A</strong>nimal and complex organisms, or <strong>C</strong>ells and molecules.
                  By examining the sub MeSH tree numbers of the MeSH terms associated with a given publication, MeSH terms are grouped into one of these three categories.
                  Following Weber's mapping scheme A is mapped to all sub MeSH numbers under the Eukaryota (<a href="https://www.nlm.nih.gov/cgi/mesh/2015/MB_cgi?mode=dcms&term=Eukaryota&field=entry#TreeB01" target="_blank">B01</a>) subtree, with exception of the human sub MeSH number
                  <a href="https://www.nlm.nih.gov/cgi/mesh/2015/MB_cgi?mode=dcms&term=Humans&field=entry#TreeB01.050.150.900.649.801.400.112.400.400" target="_blank">B01.050.150.900.649.801.400.112.400.400</a> which is mapped to H.  In addition the subtree Person (<a href="https://www.nlm.nih.gov/cgi/mesh/2015/MB_cgi?mode=dcms&term=Persons&field=entry#TreeM01" target="_blank">M01</a>) is also mapped to H.  C is mapped to Cells (<a href="https://www.nlm.nih.gov/cgi/mesh/2015/MB_cgi?mode=dcms&term=Body+Regions&field=entry#TreeA01" target="_blank">A11</a>), Archaea (<a href="https://www.nlm.nih.gov/cgi/mesh/2015/MB_cgi?mode=dcms&term=Archaea&field=entry#TreeB02" target="_blank">B02</a>),
                   Bacteria (<a href="https://www.nlm.nih.gov/cgi/mesh/2015/MB_cgi?mode=dcms&term=Bacteria&field=entry#TreeB03" target="_blank">B03</a>), Viruses (<a href="https://www.nlm.nih.gov/cgi/mesh/2015/MB_cgi?mode=dcms&term=Viruses&field=entry#TreeB04" target="_blank">B04</a>), Molecular Structures (<a href="https://www.nlm.nih.gov/cgi/mesh/2015/MB_cgi?mode=dcms&term=Molecular+Structure&field=entry#TreeG02.111.570" target="_blank">G02.111.570</a>), and Chemical Processes (<a href="https://www.nlm.nih.gov/cgi/mesh/2015/MB_cgi?mode=dcms&term=Chemical+Processes&field=entry#TreeG02.149" target="_blank">G02.149</a>).  In addition to Weber's mapping scheme, we have added all sub
                  MeSH numbers under the Disease (<a href="https://www.nlm.nih.gov/mesh/2015/mesh_browser/DCMS/MeSHtree.C.html#link_id" target="_blank">C</a>) tree.
                  </p>
                  <p>
                  As we processed publications we treated the identifiable MeSH, those that could be codified by our mapping, as proportions based on the total MeSH terms cited for the
                  given publication.  The publications are then grouped by author, represented by nodes in the tertiary plot above.  These aggregated values are
                  representative of what percentage of the author's work falls into the given category.  By treating each value as the magnitude of a vector from the tertiary's centroid
                  to the category the value represents, a vector is calculated for each category.  Once the vectors of the node are computed the vector sum is taken, resulting in the coordinates of the node in the tertiary plot.
                  </p>
                  <p>
                  By taking a cohort based on the population of nodes within discrete regions of the tertiary plot, the specific research trends of the cohort can be viewed over time.
                  By default we focus on a cohort of those authors in the two regions of the tertiary plot furthest from the human research category.  As cell and animal research can be considered basic
                  science, we can follow the movement of the cohort population and see if they gravitate towards more translational research over time.  It can be seen that for this specific
                  cohort there is indeed a diaspora in the direction of human research.
                  </p>
                </div>
              </div>

              <!-- END PROJECT INFO BODY -->
            </div>
          </div>
        </div>

        <!-- ACKNOWLEGDEMENTS-->
        <div class="panel panel-info">
          <div class="panel-heading">
            <h3 class="text-center"><b>Acknowledgements</b></h3>
          </div>
          <div class="panel-body">
            <p>
              <strong>Principal Investigator:</strong> <a target="_new" href="http://academicdepartments.musc.edu/psychiatry/faculty/obeidj.htm">Dr. Jihad Obeid</a>, Biomedical Informatics Center - Medical University of South Carolina
            </p>
            <p>
              <strong>Principal Investigator:</strong> <a target="_new" href="http://compsci.cofc.edu/about/faculty-staff-listing/anderson-paul.php">Dr. Paul Anderson</a>, Bioinformatics Research Group - College of Charleston
            </p>
            <p>
              <strong>Chief Developer:</strong> <a target="_new" href="https://thomasLevans.github.io">Thomas L. Evans</a>, Department of Computer Science - College of Charleston
            </p>
            <hr>
            <p>
            <i>Special thanks to Tami Crawford, Medical University of South Carolina</i>
            </p>
          </div>
        </div>
      </div>
      <!-- END INFO PANEL -->

      <!-- TIME SEQUENCE -->
      <div class="col-sm-6 col-md-6 col-lg-6">
        <div class="container-fluid">
          <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12">
              <div class="panel panel-default">
                <div class="panel-heading text-center">
                  <h3>Selected Cohort Overview</h3>
                </div>
                <!-- TIME SEQUENCE CHART DIV HERE -->
                <div class="panel-body heat-map"></div>
              </div>
            </div>
          </div>
<!--          <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12">
              <div class="panel panel-default">
                <div class="panel-heading text-center">
                  <h3>Animal Research Trend</h3>
                </div>
                 TIME SEQUENCE CHART DIV HERE
                <div class="panel-body A-trend-chart"></div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12">
              <div class="panel panel-default">
                <div class="panel-heading text-center">
                  <h3>Cellular Research Trend</h3>
                </div>
                TIME SEQUENCE CHART DIV HERE
                <div class="panel-body C-trend-chart"></div>
              </div>
            </div>
          </div> -->
        </div>
      </div>
    </div>
  </div>
  <!-- END INFO & TIME SEQUENCE -->

  <!-- SCRIPT TAGS BELOW HERE! -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.0/js/bootstrap-toggle.min.js"></script>
  <script src="lib/modules/require.js" data-main="src/require-config"></script>
</body>
</html>
